<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[Kafka安装与常用命令]]></title>
      <url>/2017/05/07/Kafka%E5%AE%89%E8%A3%85%E4%B8%8E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul>
<li>启动kafka<br>/usr/local/kafka/bin/kafka-server-start.sh /usr/local/kafka/config/server.properties &amp;</li>
<li>创建名为test的主题<br>./kafka-topics.sh –create –topic test –replication-factor 1 –partitions 3 –zookeeper 192.168.17.137:2181,192.168.17.138:2181,192.168.17.139:2181</li>
<li><p>查看”mytopic”这个Topic的详细信息：<br>./kafka-topics.sh –describe –topic test –zookeeper localhost:2181</p>
</li>
<li><p>启动消费者，从”accesslog”这个Topic中消费消息，其中”–from-beginning”为可选参数，表示要从头消费消息：</p>
</li>
</ul>
<p>./kafka-console-consumer.sh –topic test –from-beginning –zookeeper localhost:2181 </p>
<ul>
<li>查看所有的Topic列表：</li>
</ul>
<p>./kafka-topics.sh –list –zookeeper localhost:2181</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[CentOS7下Storm安装配置]]></title>
      <url>/2017/05/01/CentOS7%E4%B8%8BStorm%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h2 id="strom环境搭建"><a href="#strom环境搭建" class="headerlink" title="strom环境搭建"></a>strom环境搭建</h2><h3 id="相关配置"><a href="#相关配置" class="headerlink" title="相关配置"></a>相关配置</h3><p>三个节点同时解压到/usr/local下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf apache-storm-0.9.2-incubating.tar.gz -C /usr/<span class="built_in">local</span></div></pre></td></tr></table></figure></p>
<p>为了操作简单我们修改解压出来的文件夹名字<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv apache-storm-0.9.2-incubating apache-storm-0.9.2</div></pre></td></tr></table></figure></p>
<p>给三个加点都配置环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim etc/profile</div></pre></td></tr></table></figure></p>
<p>添加以下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ZOOKEEPER=/usr/<span class="built_in">local</span>/zookeeper-3.4.6</div><div class="line"><span class="built_in">export</span> STORM_HOME=/usr/<span class="built_in">local</span>/apache-storm-0.9.2</div><div class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$ZOOKEEPER</span>/bin:<span class="variable">$STORM_HOME</span>/bin;</div><div class="line"><span class="built_in">export</span> PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL</div><div class="line"></div><div class="line"><span class="built_in">source</span> /etc/profile</div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure></p>
<p>修改conf/storm.yaml配置文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> apache-storm-0.9.2/conf/</div><div class="line">vim storm.yaml </div><div class="line"><span class="comment">#添加以下内容，注意空格，这里主节点是137</span></div><div class="line"> storm.zookeeper.servers:</div><div class="line">     - <span class="string">"192.168.17.137"</span></div><div class="line">     - <span class="string">"192.168.17.138"</span></div><div class="line">     - <span class="string">"192.168.17.139"</span></div><div class="line"></div><div class="line"> nimbus.host: <span class="string">"192.168.17.137"</span></div><div class="line"> <span class="comment">#这个文件夹默认是不存在的，你自己建立一下</span></div><div class="line"> storm.local.dir: <span class="string">"/usr/local/apache-storm-0.9.2/data"</span></div><div class="line"> ui.port: 18080</div><div class="line"> <span class="comment">#这里是一个主节点两个从节点，每个从节点开放两个端口，即工作进程工作的时候所占用的端口</span></div><div class="line"> supervisor.slots.ports:</div><div class="line">    - 6700</div><div class="line">    - 6701</div><div class="line">    - 6702</div><div class="line">    - 6703</div><div class="line"></div><div class="line"> drpc.servers:</div><div class="line">    - <span class="string">"192.168.17.137"</span></div></pre></td></tr></table></figure></p>
<p>建立一个data文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p /usr/<span class="built_in">local</span>/apache-storm-0.9.2/data</div></pre></td></tr></table></figure></p>
<p>先启动zookeeper集群，然后分别运行启动storm</p>
<ol>
<li>进入zookeeper的bin目录，执行sh zkServer.sh start进行启动zookeeper</li>
<li>查看状态   进入bin目录，执行sh zkServer.sh status</li>
<li>停止    进入bin目录，执行sh zkServer.sh stop</li>
</ol>
<p>启动storm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#主节点：</span></div><div class="line">storm nimbus &amp;</div><div class="line"><span class="comment">#从节点</span></div><div class="line">storm supervisor &amp;</div><div class="line"></div><div class="line"><span class="comment">#可用jps密令查看是否启动成功</span></div><div class="line"><span class="comment">#可到/usr/local/apache-storm-0.9.2/logs查看日志</span></div></pre></td></tr></table></figure></p>
<p>在主节点启动管控台<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">storm ui &amp;</div></pre></td></tr></table></figure></p>
<p>通过主节点的ip:18080即可访问管控台</p>
<h2 id="java程序编写"><a href="#java程序编写" class="headerlink" title="java程序编写"></a>java程序编写</h2><h3 id="建立maven工程"><a href="#建立maven工程" class="headerlink" title="建立maven工程"></a>建立maven工程</h3><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>bhz.bolt<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>storm01<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>storm01<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Repository where we can found the storm dependencies  --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>clojars.org<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://clojars.org/repo<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.storm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>storm-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.2-incubating<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>storm01<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- 单元测试 --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*Test*.java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                    <span class="comment">&lt;!-- 绑定到特定的生命周期之后，运行maven-source-pluin 运行目标为jar-no-fork --&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="本地模式"><a href="#本地模式" class="headerlink" title="本地模式"></a>本地模式</h3><p>Storm允许开发者在本地模拟storm集群模式。<br><figure class="highlight java"><figcaption><span>main</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1 本地模式</span></div><div class="line">LocalCluster cluster = <span class="keyword">new</span> LocalCluster();</div><div class="line">cluster.submitTopology(<span class="string">"top1"</span>, cfg, builder.createTopology());</div><div class="line">Thread.sleep(<span class="number">10000</span>);</div><div class="line">cluster.killTopology(<span class="string">"top1"</span>);</div><div class="line">cluster.shutdown();</div></pre></td></tr></table></figure></p>
<h3 id="集群模式"><a href="#集群模式" class="headerlink" title="集群模式"></a>集群模式</h3><figure class="highlight java"><figcaption><span>main</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//2 集群模式</span></div><div class="line">StormSubmitter.submitTopology(<span class="string">"top1"</span>, cfg, builder.createTopology());</div></pre></td></tr></table></figure>
<p>打好jar包以后，运行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">storm jar ***.jar com.cat.PWTopology1</div><div class="line"><span class="comment"># 可以用storm list 命令来查看当前storm的工作状态 </span></div><div class="line"><span class="comment">#启动成功之后在从节点上用jps命令会发现多了两个worker进程</span></div></pre></td></tr></table></figure></p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><p>CentOS 7.0默认使用的是firewall作为防火墙，使用iptables必须重新设置一下</p>
<p>1、直接关闭防火墙</p>
<p>systemctl stop firewalld.service #停止firewall</p>
<p>systemctl disable firewalld.service #禁止firewall开机启动</p>
<p>2、设置 iptables service</p>
<p>yum -y install iptables-services</p>
<p>如果要修改防火墙配置，如增加防火墙端口3306</p>
<p>vi /etc/sysconfig/iptables </p>
<p>增加规则</p>
<p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</p>
<p>保存退出后</p>
<p>systemctl restart iptables.service #重启防火墙使配置生效</p>
<p>systemctl enable iptables.service #设置防火墙开机启动</p>
<p>最后重启系统使设置生效即可。</p>
<h3 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hostnamectl --static <span class="built_in">set</span>-hostname 起的名字</div><div class="line"><span class="comment">#修改完毕后也要同步修改 /etc/hosts 文件</span></div><div class="line">127.0.0.1 起的名字</div></pre></td></tr></table></figure>
<h2 id="storm的top配置"><a href="#storm的top配置" class="headerlink" title="storm的top配置"></a>storm的top配置</h2><center><br><img src="/img/storm_top_config_1.jpg" title="点击进入看图模式"><br></center>]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Storm </tag>
            
            <tag> 大数据 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CentOS下安装JDK1.7]]></title>
      <url>/2017/04/30/CentOS%E4%B8%8B%E5%AE%89%E8%A3%85JDK1-7/</url>
      <content type="html"><![CDATA[<h3 id="源码包准备"><a href="#源码包准备" class="headerlink" title="源码包准备"></a>源码包准备</h3><p>首先到官网下载jdk，<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html" target="_blank" rel="external">点我下载</a>，我下载jdk-7u45-linux-x64.tar.gz，下载到主目录<br><a id="more"></a></p>
<h3 id="解压源码包"><a href="#解压源码包" class="headerlink" title="解压源码包"></a>解压源码包</h3><p>通过终端在/usr/local目录下新建java文件夹，命令行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo mkdir /usr/<span class="built_in">local</span>/java</div></pre></td></tr></table></figure></p>
<p>然后将下载到压缩包拷贝到java文件夹中，命令行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp jdk-7u45-linux-x64.tar.gz /usr/<span class="built_in">local</span>/java</div></pre></td></tr></table></figure></p>
<p>然后进入java目录，命令行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/java</div></pre></td></tr></table></figure></p>
<p>解压压缩包，命令行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo tar xvf jdk-7u45-linux-x64.tar.gz</div></pre></td></tr></table></figure></p>
<p>然后可以把压缩包删除，命令行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo rm jdk-7u45-linux-x64.tar.gz</div></pre></td></tr></table></figure></p>
<h3 id="设置jdk环境变量"><a href="#设置jdk环境变量" class="headerlink" title="设置jdk环境变量"></a>设置jdk环境变量</h3><p>这里采用全局设置方法，就是修改etc/profile，它是是所有用户的共用的环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>打开之后在末尾添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/java/jdk1.7.0_45</div><div class="line"><span class="built_in">export</span> JRE_HOME=/usr/<span class="built_in">local</span>/java/jdk1.7.0_45/jre</div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_HOME</span>/lib:<span class="variable">$CLASSPATH</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></div></pre></td></tr></table></figure></p>
<p>请记住，在上述添加过程中，等号两侧不要加入空格，不然会出现“不是有效的标识符”，因为source /etc/profile 时不能识别多余到空格，会理解为是路径一部分。<br>然后保存<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> /etc/profile</div></pre></td></tr></table></figure></p>
<p> 使profile生效</p>
<h3 id="检验是否安装成功"><a href="#检验是否安装成功" class="headerlink" title="检验是否安装成功"></a>检验是否安装成功</h3><p>在终端<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -version</div></pre></td></tr></table></figure></p>
<p>看看是否安装成功<br>成功则显示如下<em><br>java version “1.7.0_45”<br>Java(TM) SE Runtime Environment (build 1.7.0_45-b18)<br>Java HotSpot(TM) 64-Bit Server VM (build 24.45-b08, mixed mode)
</em></p>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> JDK </tag>
            
            <tag> 安装配置 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[hexo搭建github博客笔记]]></title>
      <url>/2017/04/28/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>使用hexo生成静态博客并架设在免费的github page平台<br><a id="more"></a></p>
<h2 id="node-js配置"><a href="#node-js配置" class="headerlink" title="node.js配置"></a>node.js配置</h2><h3 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h3><p>从官网上下载node.js <a href="https://nodejs.org/en/" target="_blank" rel="external">点我下载node.js</a>，安装时注意勾选ADD TO PATH</p>
<h3 id="npm代理设置"><a href="#npm代理设置" class="headerlink" title="npm代理设置"></a>npm代理设置</h3><p>由于众所周知的原因，npm 安装组件时会相当漫长。当使用 Shadowsocks 可以用如下方法来提高下载速度<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global http.http://github.com.proxy https://127.0.0.1:1080$</div><div class="line">$ git config --global https.https://github.com.proxy https://127.0.0.1:1080</div></pre></td></tr></table></figure></p>
<h3 id="设置node-js的源为阿里云"><a href="#设置node-js的源为阿里云" class="headerlink" title="设置node.js的源为阿里云"></a>设置node.js的源为阿里云</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<p>或者你直接通过添加 npm 参数 alias 一个新命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> cnpm=<span class="string">"npm --registry=https://registry.npm.taobao.org \</span></div><div class="line">--cache=<span class="variable">$HOME</span>/.npm/.cache/cnpm \</div><div class="line">--disturl=https://npm.taobao.org/dist \</div><div class="line">--userconfig=<span class="variable">$HOME</span>/.cnpmrc"</div><div class="line"></div><div class="line"><span class="comment"># Or alias it in .bashrc or .zshrc</span></div><div class="line">$ <span class="built_in">echo</span> <span class="string">'\n#alias for cnpm\nalias cnpm="npm --registry=https://registry.npm.taobao.org \</span></div><div class="line">  --cache=$HOME/.npm/.cache/cnpm \</div><div class="line">  --disturl=https://npm.taobao.org/dist \</div><div class="line">  --userconfig=$HOME/.cnpmrc"' &gt;&gt; ~/.zshrc &amp;&amp; <span class="built_in">source</span> ~/.zshrc</div></pre></td></tr></table></figure></p>
<p>  此时即可使用 cnpm 命令来取代 npm 命令了，下载速度嗖嗖的！！！</p>
<h2 id="hexo配置"><a href="#hexo配置" class="headerlink" title="hexo配置"></a>hexo配置</h2><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cnpm install -g hexo-cli</div></pre></td></tr></table></figure>
<p>  安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo init &lt;folder&gt;</div><div class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</div><div class="line">$ npm install</div></pre></td></tr></table></figure></p>
<h3 id="安装hexo的主题Yeelee"><a href="#安装hexo的主题Yeelee" class="headerlink" title="安装hexo的主题Yeelee"></a>安装hexo的主题Yeelee</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/MOxFIVE/hexo-theme-yelee.git themes/yelee</div></pre></td></tr></table></figure>
<h3 id="进行自定义配置"><a href="#进行自定义配置" class="headerlink" title="进行自定义配置"></a>进行自定义配置</h3><p>修改hexo根目录下的 _config.yml 和 Yeele 主题的 _config.yml 配置文件即可</p>
<p><strong>附录：</strong><br><a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="external">hexo文档</a> 和 <a href="http://moxfive.coding.me/yelee/" target="_blank" rel="external">Yeele主题文档</a></p>
<h2 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h2><h3 id="生成SSh-key"><a href="#生成SSh-key" class="headerlink" title="生成SSh key"></a>生成SSh key</h3><p>首先我们需要检查你电脑上现有的ssh key,打开git bsah，输入命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -al ~/.ssh</div></pre></td></tr></table></figure></p>
<p>如果不存在就没有关系，如果存在的话，直接删除.ssh文件夹里面所有文件。 </p>
<p>输入以下命令，记住”<strong>**</strong>@<em>*</em>.com”是我的邮箱，这个邮箱是你当时注册github时所用的邮箱。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C <span class="string">"******@***.com"</span></div></pre></td></tr></table></figure></p>
<p>然后会要求你填写passphrase，一路回车即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/your_user_directory/.ssh/id_rsa):（回车就好），</div><div class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):（回车，不需要输入密码）</div><div class="line">Enter same passphrase again:（回车不需要输入密码）</div></pre></td></tr></table></figure></p>
<p>注意： 因为Hexo的自动部署如果有密码的话会部署失败</p>
<p>输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-agent <span class="_">-s</span></div></pre></td></tr></table></figure></p>
<p>继续输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ssh-add ~/.ssh/id_rsa （此时若提示出错了就输入已下命令）</div><div class="line">$ <span class="built_in">eval</span> `ssh-agent <span class="_">-s</span>` </div><div class="line">$ ssh-add</div></pre></td></tr></table></figure></p>
<h3 id="github的SSH设置"><a href="#github的SSH设置" class="headerlink" title="github的SSH设置"></a>github的SSH设置</h3><p>打开网页版github，头像旁边的下拉小箭头选择“Settings”-“SSH keys”-“Add SSH key”<br>在Title里自己起个名字在Key文本框复制上一步生成的id_rsa.pub的文件内容粘贴上即可  </p>
<h3 id="配置Hexo一键部署安装"><a href="#配置Hexo一键部署安装" class="headerlink" title="配置Hexo一键部署安装"></a>配置Hexo一键部署安装</h3><p>打开 Hexo目录下的 _config.yml，这里注意最好不要用记事本打开，因为会出现乱码的，推荐使用 Notepad++，很简单。如果已经在「记事本」中编辑过，需要使用Notepad++ 转码为「utf8」修改_config.yml文件，以下是修改的地方:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line"><span class="built_in">type</span>: git     <span class="comment">#冒号后面空一格，半角空格，下面一样,我在这里写注释，你千万别像我一样在修改文件时也写中文注释</span></div><div class="line">repository:git@github.com:u3dysj/u3dysj.github.io.git</div><div class="line">branch: master    <span class="comment"># 分支选择 master</span></div></pre></td></tr></table></figure></p>
<p>先进入 Hexo目录，在文件夹任意地方右键 Git Bash Here  </p>
<p>安装部署所需要的插件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cnpm install hexo-deployer-git --save</div></pre></td></tr></table></figure></p>
<p>部署发布命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo deploy</div></pre></td></tr></table></figure></p>
<h2 id="绑定自己的域名"><a href="#绑定自己的域名" class="headerlink" title="绑定自己的域名"></a>绑定自己的域名</h2><p>部署到github以后发现“有言”评论框不显示，原来是github pages开启了全站https，而“有言”评论不支持https。而且如果你的博客引用的图片外链是http的话，图片也不会显示。考虑到github pages只是展示性网站，不必要采用https也为了兼容http链接，所以我们要禁用https采用http就可以了，而github并没有给出关闭https的选项，我们只能通过绑定自己的域名的方式来采用http链接。  </p>
<ol>
<li>在source文件夹中新建一个CNAME文件（无后缀名），然后用文本编辑器打开，在首行添加你的网站域名，注意前面没有http:// ，也没有www，然后使用 hexo g &amp;&amp; hexo d上传部署。</li>
<li>在域名解析提供商（如godaddy）进行设置。在A记录填写你的github地址（如：xxx.github.io）即可使用”域名.com”访问你的网站</li>
</ol>
]]></content>
      
        <categories>
            
            <category> hexo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
